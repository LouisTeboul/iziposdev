<md-content ng-controller="ConfigurableMenuListController" id="ConfigurableMenuList" ng-init="init()"
            ng-class="{'isBorneVertical': $root.borne && $root.borneVertical}" class="borneVStr">
    <h1 class="cBRTitle"
        ng-style="{ 'border-color' : $root.tenantColor}">Composez votre menu</h1>
    <section id="allCategories" class="mainGroupOrder"
             ng-style="{'flex-direction' :  $rootScope.borne && $rootScope.borneVertical ? 'column' : 'row'}">
        <div class="summaryList" ng-style="{'width' :  $rootScope.borne && $rootScope.borneVertical ? '100%' : '750px',
            'max-height' : canAddToCart && !productListOpen ? 'initial' : ($rootScope.isPMREnabled ? '200px' :
            ($rootScope.borne && $rootScope.borneVertical ? '500px' : 'calc(100% - 50px'))}">
            <div ng-repeat="attribute in product.ProductAttributes track by $index" ng-click="attributeNext($index)">
                <div class="orderSProduct" ng-repeat="v in attribute.ProductAttributeValues track by $index"
                     ng-style="{'margin-bottom' : $root.borne && $root.borneVertical ? '50px' : '40px'}"
                     ng-if="v.Selected">
                    <img ng-src="{{v.DefaultPictureUrl}}"/>
                    <div data-ng-bind-html="v.Name"></div>
                    <span ng-if="v.PriceAdjustment"
                          ng-style="{ 'color' : $root.tenantColor}">{{v.PriceAdjustment | CurrencyFormat}}</span>
                    <span ng-if="!v.PriceAdjustment && $index == 0"></span>
                </div>
            </div>
            <div aria-label="NavigAttr" ng-repeat="attr in product.ProductAttributes track by $index"
                 class="btnStepBorne {{$index}}" ng-click="attributeNext($index)"
                 ng-style="{'background-color' : $root.tenantColor}"
                 ng-if="attr.classDisplay == 'flex' && !canAddToCart">{{attr.Name}}
            </div>
        </div>
        <div ng-class="{ 'productCatMenuList' : $root.borne && $root.borneVertical,
            'productCatMenuListHoriz' : $root.borne && !$root.borneVertical }"
             ng-style="{ 'padding-top' : canAddToCart || ($root.borne && !$root.borneVertical) ? '0' : '50px'}">
            <div id="{{attribute.Name}}" ng-repeat="attribute in product.ProductAttributes track by $index"
                 class="productsCat" style="display:{{attribute.classDisplay}};"
                 displayorder="{{$index}}">
                <div class="groupProductsCat">
                    <div ng-repeat="v in attribute.ProductAttributeValues track by $index" class="itemCatMenuList"
                         ng-class="{ 'disable': v.DisableBuyButton, 'active' : !v.DisableBuyButton && v.Selected == 1 }"
                         ng-if="!canAddToCart || allowShowCat">
                        <div class="productboxIZIPASS medium"
                             ng-click="v.DisableBuyButton ? null : selectAttributeValue(v.ProductAttributeId,v.Id)">
                            <div class="imgProduct">
                                <img alt="" ng-src="{{v.DefaultPictureUrl}}" class="image"/>
                            </div>
                            <div class="titleRow" ng-if="v.LinkedProduct">{{v.LinkedProduct.Name}}</div>
                            <div class="titleRow" ng-if="!v.LinkedProduct">{{v.Name}}</div>
                            <div class="price">
                                <span ng-if="!v.DisableBuyButton && v.PriceAdjustment"
                                      ng-style="{ 'color' : $root.tenantColor}">+&nbsp;{{v.PriceAdjustment | CurrencyFormat}}</span>
                                <span ng-if="v.DisableBuyButton">Rupture</span>
                            </div>
                        </div>
                    </div>
                </div>
                <md-button ng-click="attributeNextButton(attribute)"
                           class="btnSkipStep" ng-if="attribute.Type == 3 && !canAddToCart" translate>
                    Etape Suivante
                </md-button>
                <div class="pubProductsCut"
                     ng-style="{ 'bottom' : attribute.Type == 3 || (attribute.Type != 3 && canAddToCart) ? '400px' : '250px'}"></div>
            </div>
        </div>
    </section>
    <div class="rowConfirmOrderML" ng-if="canAddToCart">
        <div class="totalOrderML">
            <span translate>Total</span>
            <span class="price"
                  ng-style="{ 'color' : $root.tenantColor}">{{product.Price | CurrencyFormat}}</span>
        </div>
        <md-button class="btnConfirmMenuList"
                   ng-style="{ 'background-color' : $root.tenantColor}"
                   aria-label="AddToCart"
                   ng-click="addToCart(product)">
            <span translate>Valider mon Menu</span>
        </md-button>
    </div>
    <div ng-class="{ 'pubProductsList' : $root.borne && $root.borneVertical, 'pubProductsListHoriz' : $root.borne && !$root.borneVertical}"
         ng-if="!$rootScope.isPMREnabled"></div>
</md-content>