<md-content ng-controller="ConfigurableMenuListController" id="ConfigurableMenuList" ng-init="init()"
            ng-class="{'isBorneVertical': $root.borneVertical}" class="borneVStr">
    <div class="menuHeader">
        <div class="cBRTitle" ng-style="{ 'border-color' : $root.tenantColor}" layout="column">
            <div translate>Composez votre menu</div>
            <div layout="row" style="font-size:26px">
                <img ng-show="!$root.IziBoxConfiguration.NoPictures" ng-src="{{product.DefaultPictureUrl}}" width="50" height="50" src="" alt="" style="margin-right:15px" />
                <div style="margin-right:15px;margin-top:5px">{{ product.Name }}</div>
                <div ng-show="product.Price" style="margin-top:5px" ng-style="{'color' : $root.tenantColor}">{{initPrice | CurrencyFormat}}</div>
            </div>
        </div>
        <div class="returnBtnWrap">
            <div class="leftArrow" ng-style="{ 'border-right-color' : $root.tenantColor}"></div>
            <div class="returnBtn" ng-style="{ 'background-color' : $root.tenantColor}"
                 ng-click="returnToCat(product)" translate>
                Retour
            </div>
        </div>
    </div>
    <section id="allCategories" class="mainGroupOrder" layout="column" ng-style="{'margin': mdMedia('min-width: 800px') ? '20px 20px 0 50px' : '10px 10px 0 10px'}">
        <div id="att{{attribute.Id}}" ng-repeat="attribute in product.ProductAttributes track by $index" layout="column" ng-show="attribute.ProductAttributeValues.length > 0">
            <div class="attributeHeader" layout="column">
                <div class="attributeTitle" ng-style="{ 'color' : $root.tenantColor}">{{attribute.Name}}<span ng-show="attribute.IsRequired"> *</span></div>
                <div class="attributeRules" ng-show="attribute.IsRequired || (attribute.Min || attribute.Max || attribute.NbFree)" layout="column">

                    <div ng-show="attribute.IsRequired">
                        <span ng-show="attribute.Min">{{attribute.Min}} Obligatoire</span>
                        <span ng-show="!attribute.Min">1 Obligatoire</span>
                        <span ng-show="attribute.Max"> - {{attribute.Max}} Max</span>
                    </div>
                    <div ng-show="!attribute.IsRequired">
                        <span ng-show="attribute.Min">{{attribute.Min}} Min</span>
                        <span ng-show="attribute.Min && attribute.Max"> - </span>
                        <span ng-show="attribute.Max">{{attribute.Max}} Max</span>
                    </div>

                    <div>
                        <span ng-show="attribute.NbFree">
                            {{attribute.NbFree > 1 ? "Les " + attribute.NbFree : "Le"}} moins cher {{attribute.NbFree > 1 ? "sont" : "est"}} offert{{attribute.NbFree > 1 ? "s" : ""}} !
                        </span>
                    </div>

                </div>
            </div>
            <div class="attributeList" style="flex-wrap:wrap" layout="row">
                
                <!-- Nique tout en mode nopicture -->
                <!-- ng-style="{'max-width': $root.borneVertical ? (mdMedia('min-width: 800px') ? '200px' : '50px') : (mdMedia('min-height: 800px') ? '175px' : '50px')}" -->
                <div class="attributeProduct" ng-repeat="pav in attribute.ProductAttributeValues track by $index"                     
                     ng-init="attributeIsDisabled = pav.LinkedProduct && (pav.LinkedProduct.ManageInventoryMethodId === 1 && pav.LinkedProduct.StockQuantity === 0)">
                    <div class="productboxIZIPASS configurable"
                         ng-class="{ 'disabled productIPDisabled': attributeIsDisabled,
								 'active' : !attributeIsDisabled && pav.Selected == 1,
								 'nopicture' : $root.IziBoxConfiguration.NoPictures}"
                         ng-style="{'background-color': pav.Selected ? $root.tenantColor + '69' : 'white'}"
                         ng-click="attributeIsDisabled ? null : selectAttributeValue(pav.ProductAttributeId,pav.Id)">
                        <div ng-show="!$root.IziBoxConfiguration.NoPictures" class="imgProduct configurable"
                             ng-class="{'bigProduct': $root.borneVertical && mdMedia('min-width: 800px')}">
                            <img alt="" ng-src="{{pav.DefaultPictureUrl}}" class="image" src="" />
                        </div>
                        <div class="boxContent">
                            <div class="titleRow" ng-show="pav.LinkedProduct">{{pav.LinkedProduct.Name}}</div>
                            <div class="titleRow" ng-show="!pav.LinkedProduct">{{pav.Name}}</div>
                            <div class="price">
                                <span ng-show="!attributeIsDisabled && pav.PriceAdjustment"
                                      ng-style="{ 'color' : $root.tenantColor}">+&nbsp;{{pav.PriceAdjustment | CurrencyFormat}}</span>
                                <span ng-show="attributeIsDisabled" style="color: black">Rupture</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <div class="rowConfirmOrderML" ng-show="canAddToCart" ng-style="{'max-width': $root.borneVertical ? 'calc(100% - 90px)' : '450px'}">
        <div class="totalOrderML">
            <span translate>Total</span>
            <span class="price"
                  ng-style="{ 'color' : $root.tenantColor}">{{product.Price | CurrencyFormat}}</span>
        </div>
        <md-button class="btnConfirmMenuList"
                   ng-style="{ 'background-color' : $root.tenantColor}"
                   aria-label="AddToCart"
                   ng-click="addToSC(product)">
            <span translate>Valider ma compo'</span>
        </md-button>
    </div>
    <!--<div ng-class="{'pubProductsList' : $root.borneVertical, 'pubProductsListHoriz' : !$root.borneVertical}"
         ng-style="{'background-image': $root.bornePubImages ? 'url(' + $root.bornePubImages[0] + ')' : 'url(\'img/ad.png\')'}"
         ng-show="!$root.isPMREnabled && mdMedia('min-width: 800px')"></div>-->
</md-content>